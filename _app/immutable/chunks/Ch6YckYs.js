import{c as _,b as y,H as w,h as o,C as E,d as T,g as u,s as p,i as m,j as d,k,l as v,r as A,m as b,p as C,n as g,o as F,q as M,t as D,u as N,v as R,w as x,E as H}from"./BwjNlKkA.js";let f;function B(){f=void 0}function j(c){let e=null,a=o;var t;if(o){for(e=d,f===void 0&&(f=k(document.head));f!==null&&(f.nodeType!==E||f.data!==T);)f=u(f);f===null?p(!1):f=m(u(f))}o||(t=document.head.appendChild(_()));try{y(()=>c(t),w)}finally{a&&(p(!0),f=d,m(e))}}class O{anchor;#s=new Map;#t=new Map;#e=new Map;#a=!0;constructor(e,a=!0){this.anchor=e,this.#a=a}#n=()=>{var e=v;if(this.#s.has(e)){var a=this.#s.get(e),t=this.#t.get(a);if(t)A(t);else{var s=this.#e.get(a);s&&(this.#t.set(a,s.effect),this.#e.delete(a),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),t=s.effect)}for(const[n,i]of this.#s){if(this.#s.delete(n),n===e)break;const r=this.#e.get(i);r&&(b(r.effect),this.#e.delete(i))}for(const[n,i]of this.#t){if(n===a)continue;const r=()=>{if(Array.from(this.#s.values()).includes(n)){var l=document.createDocumentFragment();F(i,l),l.append(_()),this.#e.set(n,{effect:i,fragment:l})}else b(i);this.#t.delete(n)};this.#a||!t?C(i,r,!1):r()}}};ensure(e,a){var t=v,s=M();if(a&&!this.#t.has(e)&&!this.#e.has(e))if(s){var n=document.createDocumentFragment(),i=_();n.append(i),this.#e.set(e,{effect:g(()=>a(i)),fragment:n})}else this.#t.set(e,g(()=>a(this.anchor)));if(this.#s.set(t,e),s){for(const[r,h]of this.#t)r===e?t.skipped_effects.delete(h):t.skipped_effects.add(h);for(const[r,h]of this.#e)r===e?t.skipped_effects.delete(h.effect):t.skipped_effects.add(h.effect);t.add_callback(this.#n)}else o&&(this.anchor=d),this.#n()}}function q(c,e,...a){var t=new O(c);y(()=>{const s=e()??null;t.ensure(s,s&&(n=>s(n,...a)))},H)}function I(c){return(e,...a)=>{var t=c(...a),s;if(o)s=d,D();else{var n=t.render().trim(),i=N(n);s=k(i),e.before(s)}const r=t.setup?.(s);R(s,s),typeof r=="function"&&x(r)}}export{O as B,I as c,j as h,B as r,q as s};
